---
import { getCollection } from 'astro:content';

const collections = ['careers','learn','tools','money','rights'];
let all = [];
for (const c of collections) {
  const posts = await getCollection(c);
  all = all.concat(posts.map(p => ({...p, collection: c})));
}

const slugKey = 'how-to-join-merchant-navy';
const matches = all.filter(p => p.slug.includes(slugKey) || (p.data.title || '').toLowerCase().includes('join merchant navy'));
---

<html>
  <head>
    <title>How to Join Merchant Navy (India)</title>
  </head>
  <body>
    <h1>How to Join Merchant Navy (India)</h1>
    {matches.length ? (
      <ul>
        {matches.map(post => (
          <li><a href={`/${post.collection}/${post.slug}`}>{post.data.title || post.slug}</a></li>
        ))}
      </ul>
    ) : (
      <p>No matching article found. Use the main career guide.</p>
    )}
  </body>
</html>
