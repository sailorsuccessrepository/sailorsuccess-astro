import BaseLayout from '../layouts/BaseLayout.astro';
import PagefindSearch from '../components/PagefindSearch.astro';
---

<BaseLayout 
  title="Search Encyclopedia - Sailor Success"
  description="Search through 180+ articles on merchant navy careers, exams, salary, rights, and tools."
>
  <div class="max-w-6xl mx-auto px-4 py-12">
    <div class="text-center mb-8">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">
        ğŸ” Search Encyclopedia
      </h1>
      <p class="text-xl text-gray-600 dark:text-gray-300">
        Search through <strong>180+ articles</strong> on careers, exams, salary, rights, and tools
      </p>
    </div>

    <PagefindSearch />

    <div class="mt-12 max-w-3xl mx-auto">
      <h2 class="text-2xl font-bold mb-4 text-center">ğŸ”¥ Popular Searches</h2>
      <div class="flex flex-wrap justify-center gap-3">
        <button class="popular-search px-4 py-2 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-800 transition" data-query="IMU CET">IMU CET</button>
        <button class="popular-search px-4 py-2 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-lg hover:bg-green-200 dark:hover:bg-green-800 transition" data-query="sponsorship">Sponsorship</button>
        <button class="popular-search px-4 py-2 bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded-lg hover:bg-yellow-200 dark:hover:bg-yellow-800 transition" data-query="salary">Salary</button>
        <button class="popular-search px-4 py-2 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-800 transition" data-query="deck officer">Deck Officer</button>
        <button class="popular-search px-4 py-2 bg-pink-100 dark:bg-pink-900 text-pink-800 dark:text-pink-200 rounded-lg hover:bg-pink-200 dark:hover:bg-pink-800 transition" data-query="CDC">CDC</button>
        <button class="popular-search px-4 py-2 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-lg hover:bg-indigo-200 dark:hover:bg-indigo-800 transition" data-query="medical fitness">Medical Fitness</button>
        <button class="popular-search px-4 py-2 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded-lg hover:bg-red-200 dark:hover:bg-red-800 transition" data-query="STCW">STCW</button>
        <button class="popular-search px-4 py-2 bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-200 rounded-lg hover:bg-teal-200 dark:hover:bg-teal-800 transition" data-query="DG Shipping">DG Shipping</button>
      </div>
    </div>

    <div class="mt-12 text-center">
      <h2 class="text-2xl font-bold mb-4">ğŸ“š Browse by Category</h2>
      <div class="flex flex-wrap justify-center gap-4">
        <a href="/careers/" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">ğŸ§­ Careers</a>
        <a href="/learn/" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">ğŸ“š Learn</a>
        <a href="/money/" class="px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition">ğŸ’° Money</a>
        <a href="/rights/" class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">âš–ï¸ Rights</a>
        <a href="/tools/" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition">ğŸ”§ Tools</a>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const buttons = document.querySelectorAll('.popular-search');
      buttons.forEach(button => {
        button.addEventListener('click', () => {
          const query = button.getAttribute('data-query');
          const searchInput = document.querySelector('.pagefind-ui__search-input') as HTMLInputElement;
          if (searchInput && query) {
            searchInput.value = query;
            searchInput.dispatchEvent(new Event('input', { bubbles: true }));
            searchInput.focus();
          }
        });
      });
    });
  </script>
</BaseLayout>
