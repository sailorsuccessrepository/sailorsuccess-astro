---
import { getCollection } from 'astro:content';

const learn = await getCollection('learn');

// Group by subcategory
const grouped = learn.reduce((acc, post) => {
  const subcategory = post.data.subcategory || 'General';
  if (!acc[subcategory]) acc[subcategory] = [];
  acc[subcategory].push(post);
  return acc;
}, {} as Record<string, any[]>);
---

<html>
<head>
  <title>Learn Maritime - Sailor Success</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <h1>Learn Maritime</h1>
  
  {Object.entries(grouped).map(([subcategory, posts]) => (
    <section>
      <h2>{subcategory}</h2>
      <ul>
        {posts.map(post => (
          <li>
            <a href={`/learn/${post.slug}`}>{post.data.title}</a>
            {post.data.description && <p>{post.data.description}</p>}
          </li>
        ))}
      </ul>
    </section>
  ))}
</body>
</html>
